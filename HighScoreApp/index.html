<!DOCTYPE html>

<head>
    <title>Pacman High Score</title>
	<link rel="stylesheet" href="gold.css" />
</head>

<body>

	<div class="outer">
		<div class="inner">
			<h1>Add Your High Score</h1>
			<div class="bottom">
			<h3>Honor System do not abuse plz</h3>
	
			<input type="text" placeholder="name" id="nameinput">
			<input type="number" placeholder="points" id="pointsinput">
		
			<button onclick="sendScore()">Submit</button>
			<br>
				<img width="40%" src="pacman.svg" alt="Pacman"/>
			</div>
		</div>

		<div class="inner">
			<h1>Pacman High Scores</h1>
			<div class="bottom">
			<ol id="scorelist"> </ol>
		</div>
	</div>
</div>

</body>

<script>

    async function populateList(){

        let response = await fetch("http://localhost:8000/scores");
        let scores = await response.json();

        let info = "";
        for(score of scores){
            info = info +`<li> Name: ${score.name} Score: ${score.points} </li>`;
        }

        let scorelist = document.getElementById("scorelist");
        scorelist.innerHTML = info;
        
    }
    populateList();

    async function sendScore(){

        let name = document.getElementById("nameinput").value;
        let points = document.getElementById("pointsinput").value;

        let response = await fetch(`http://localhost:8000/scores/${name}/${points}`);
        populateList();
    }

 
</script>